@model DACS_QuanLyPhongTro.Models.PhongTro

@{
    ViewData["Title"] = "Chi tiết Phòng Trọ";
    Layout = "~/Areas/ChuTroArea/Views/Shared/layoutAdminLTE.cshtml";
}

<div class="content-header px-2 px-md-3 pt-1 pb-0">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
        <h2 class="h4 mb-0">@ViewData["Title"]</h2>
        <div class="d-flex align-items-center gap-2">
            <a asp-action="Index" class="btn btn-outline-secondary btn-sm">
                <i class="fas fa-arrow-left me-1"></i>Quay lại
            </a>
        </div>
    </div>
</div>

<!-- Summary widget -->
<div class="row px-2 px-md-3 mt-3 g-3">
    <div class="col-12">
        <div class="small-box bg-gradient-info mb-0">
            <div class="inner">
                <h3><i class="fas fa-info-circle me-2"></i>Thông tin chi tiết</h3>
                <p>Xem thông tin đầy đủ về phòng trọ: <strong>@Model.SoPhong</strong></p>
            </div>
            <div class="icon"><i class="fas fa-bed"></i></div>
        </div>
    </div>
    <div class="col-12"><hr class="my-2"></div>
</div>

<div class="row px-2 px-md-3 g-3">
    <div class="col-12">
        <div class="card shadow-sm border-0">
            <div class="card-body p-4">
                <div class="row g-4">
                    <!-- Hình ảnh -->
                    <div class="col-md-5">
                        <div class="text-center">
                            <h5 class="mb-3 fw-bold text-primary">
                                <i class="fas fa-image me-2"></i>Hình ảnh phòng
                            </h5>
                            @if (!string.IsNullOrEmpty(Model.Hinhanh))
                            {
                                <img src="@Url.Content("~/" + Model.Hinhanh)" alt="Hình ảnh phòng trọ" 
                                     class="img-fluid rounded border shadow-sm" 
                                     style="max-height: 400px; width: 100%; object-fit: contain;" />
                            }
                            else
                            {
                                <div class="p-5 bg-light rounded border">
                                    <i class="fas fa-image fa-4x text-muted"></i>
                                    <p class="mt-3 text-muted">Không có hình ảnh</p>
                                </div>
                            }
                        </div>
                    </div>

                    <!-- Thông tin chi tiết -->
                    <div class="col-md-7">
                        <h4 class="mb-4 fw-bold text-dark">
                            <i class="fas fa-door-open me-2 text-primary"></i>Phòng @Model.SoPhong
                        </h4>
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-success">
                                        <i class="fas fa-building me-2"></i>Tòa nhà
                                    </label>
                                    <div class="info-value">@Model.ToaNha?.TenToaNha</div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-warning">
                                        <i class="fas fa-layer-group me-2"></i>Tầng
                                    </label>
                                    <div class="info-value">@Model.Tang</div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-info">
                                        <i class="fas fa-ruler-combined me-2"></i>Diện tích
                                    </label>
                                    <div class="info-value">@Model.DienTich m²</div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-success">
                                        <i class="fas fa-money-bill-wave me-2"></i>Giá thuê
                                    </label>
                                    <div class="info-value text-success fw-bold">
                                        @string.Format("{0:N0}", Model.GiaThue) VND
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-warning">
                                        <i class="fas fa-info-circle me-2"></i>Trạng thái
                                    </label>
                                    <div class="info-value">
                                        @if (Model.TrangThai == "Trống")
                                        {
                                            <span class="badge bg-info text-white px-3 py-2">@Model.TrangThai</span>
                                        }
                                        else if (Model.TrangThai == "Đã Thuê")
                                        {
                                            <span class="badge bg-success text-white px-3 py-2">@Model.TrangThai</span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-warning text-dark px-3 py-2">@Model.TrangThai</span>
                                        }
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="form-label fw-bold text-info">
                                        <i class="fas fa-user me-2"></i>Khách thuê
                                    </label>
                                    <div class="info-value">
                                        @if (Model.KhachThue != null)
                                        {
                                            <span class="text-success fw-bold">@Model.KhachThue.HoTen</span>
                                        }
                                        else
                                        {
                                            <span class="text-muted">Chưa có khách thuê</span>
                                        }
                                    </div>
                                </div>
                            </div>

                            @if (!string.IsNullOrWhiteSpace(Model.MoTa))
                            {
                                <div class="col-12">
                                    <div class="info-item">
                                        <label class="form-label fw-bold text-info">
                                            <i class="fas fa-comment-alt me-2"></i>Mô tả
                                        </label>
                                        <div class="info-value">
                                            <p class="mb-0 text-secondary">@Model.MoTa</p>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>

                        <!-- Action buttons -->
                        <div class="mt-4 pt-3 border-top">
                            <div class="d-flex gap-2">
                                <a asp-action="Edit" asp-route-id="@Model.MaPhong" class="btn btn-warning btn-lg px-4">
                                    <i class="fas fa-edit me-2"></i>Chỉnh sửa
                                </a>
                                <a asp-action="Delete" asp-route-id="@Model.MaPhong" class="btn btn-danger btn-lg px-4">
                                    <i class="fas fa-trash me-2"></i>Xóa
                                </a>
                                <a asp-action="Index" class="btn btn-secondary btn-lg px-4">
                                    <i class="fas fa-list me-2"></i>Danh sách
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .small-box .icon{right:10px; top: 6px;}
    .info-item {
        margin-bottom: 1rem;
    }
    .info-item .form-label {
        color: #2c3e50;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        display: block;
    }
    .info-value {
        background-color: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 0.75rem 1rem;
        color: #2c3e50;
        font-weight: 500;
        min-height: 48px;
        display: flex;
        align-items: center;
        transition: all .15s ease;
    }
    .info-value:hover {
        background-color: #e9ecef;
        border-color: #6c757d;
    }
    .card {
        border-radius: 12px;
        transition: transform .15s ease, box-shadow .15s ease;
    }
    .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0,0,0,.08);
    }
    .btn-lg {
        border-radius: 8px;
        font-weight: 500;
        transition: all .15s ease;
    }
    .btn-lg:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,.15);
    }
    .badge {
        font-size: 0.9rem;
        font-weight: 500;
    }
</style>
