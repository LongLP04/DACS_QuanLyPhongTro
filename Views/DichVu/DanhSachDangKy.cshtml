@model List<DACS_QuanLyPhongTro.Models.PhieuDangKyDichVu>
@{
    ViewData["Title"] = "Danh sách phiếu đăng ký dịch vụ";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5" style="max-width: 1630px; padding: 30px; border-radius: 15px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">
    <h2 class="mb-4 text-center" style="color: #a0522d; font-weight: 700; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
        Lịch sử đăng ký dịch vụ
    </h2>

    @if (!Model.Any())
    {
        <div class="alert alert-info text-center fs-5">
            Bạn chưa đăng ký dịch vụ nào.
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var phieu in Model)
            {
                <div class="col-md-6 col-lg-4 d-flex">
                    <div class="card mb-4 border-secondary shadow-sm rounded service-card flex-fill">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">
                                Phiếu đăng ký #@phieu.MaDangKyDichVu
                            </h5>

                            <p class="mb-1"><strong>Ngày bắt đầu:</strong> @phieu.NgayBatDau.ToString("dd/MM/yyyy")</p>
                            <p class="mb-1"><strong>Ngày kết thúc:</strong> @phieu.NgayKetThuc.ToString("dd/MM/yyyy")</p>

                            <p class="mb-1">
                                <strong>Trạng thái:</strong>
                                @if (phieu.TrangThai == "Đã xác nhận")
                                {
                                    <span class="badge bg-success text-white">@phieu.TrangThai</span>
                                }
                                else
                                {
                                    <span class="badge bg-warning text-dark">@phieu.TrangThai</span>
                                }
                            </p>

                            <ul class="list-group mt-3 rounded overflow-auto detail-list">
                                @foreach (var ct in phieu.ChiTietPhieuDangKyDichVus)
                                {
                                    <li class="list-group-item d-flex justify-content-between align-items-center rounded detail-item">
                                        <div>
                                            <strong>@ct.DichVu?.TenDichVu</strong> - Số lượng: @ct.SoLuong
                                        </div>
                                        <span class="text-danger font-weight-bold">@ct.TongTienDichVu.ToString("N0") VND</span>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            }
        </div>
    }

    <div class="text-center mt-5 mb-5">
        <a asp-controller="Phongtrocuatoi" asp-action="Index" class="btn btn-warning btn-lg rounded-pill px-4 shadow-sm btn-hover-effect">
            <i class="fas fa-arrow-left mr-2"></i> Quay về Phòng trọ của tôi
        </a>
    </div>
</div>

<style>
    h2 {
        color: #a0522d !important;
        font-weight: 700 !important;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
    }

    .service-card {
        border-radius: 1rem !important; /* bo tròn card lớn */
        overflow: hidden;
        transition: all 0.3s ease;
    }

        .service-card:hover {
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
            transform: translateY(-4px);
        }

    .btn-hover-effect {
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 50rem !important;
    }

        .btn-hover-effect:hover {
            background-color: #e0a800 !important;
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(224, 168, 0, 0.5);
        }

        .btn-hover-effect:active {
            transform: scale(0.95);
            box-shadow: 0 4px 8px rgba(224, 168, 0, 0.3);
        }

    ul.detail-list {
        max-height: 150px;
        overflow-y: auto;
        background-color: white;
        padding: 0.5rem;
        border-radius: 1rem !important; /* bo tròn bảng */
    }

        ul.detail-list li.detail-item {
            border-radius: 1rem !important; /* bo tròn từng dòng */
            margin-bottom: 0.4rem;
            background-color: #fafafa;
            padding: 0.75rem 1rem;
        }

            ul.detail-list li.detail-item:last-child {
                margin-bottom: 0;
            }
</style>

