@model List<DACS_QuanLyPhongTro.Models.DichVu>
@{
	ViewData["Title"] = "Đăng ký dịch vụ";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container mt-5" style="max-width: 1630px; padding: 30px; border-radius: 15px; box-shadow: 0 0 15px rgba(0,0,0,0.1);">

	<h2 class="mb-4 text-center" style="color: #a0522d; font-weight: 700; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
		Đăng ký dịch vụ
	</h2>

	@if (TempData["Success"] != null)
	{
		<div class="alert alert-success shadow-sm rounded">@TempData["Success"]</div>
	}

	<div class="container" style="max-width: 1630px; padding: 30px;">
		<div class="service-grid">
			@foreach (var dv in Model)
			{
				<div class="card mb-4 border-primary shadow-sm service-card">
					<div class="card-body">
						<h5 class="card-title text-primary">
							<i class="fas fa-concierge-bell mr-2"></i> @dv.TenDichVu
						</h5>
						<p class="card-text">@dv.MoTa</p>
						<p class="card-text text-danger font-weight-bold">
							<i class="fas fa-dollar-sign mr-1"></i> Đơn giá: @dv.DonGiaDichVu.ToString("N0") VND
						</p>

						<form asp-action="DangKyMot" method="post" class="form-inline align-items-center service-form">
							<input type="hidden" name="maDichVu" value="@dv.MaDichVu" />

							<div class="form-group mr-3 mb-2">
								<label class="mr-2 font-weight-semibold"><i class="fas fa-sort-numeric-up mr-1"></i> Số lượng:</label>
								<input type="number" name="soLuong" value="1" min="1" class="form-control" required />
							</div>

							<div class="form-group mr-3 mb-2">
								<label class="mr-2 font-weight-semibold"><i class="fas fa-calendar-alt mr-1"></i> Ngày bắt đầu:</label>
								<input type="date" name="ngayBatDau" class="form-control ngay-bat-dau" required />
							</div>

							<div class="form-group mr-3 mb-2">
								<small class="form-text text-danger ml-1" style="font-style: italic">* Ngày kết thúc là 1 tháng sau ngày bắt đầu</small>
							</div>

							<button type="submit" class="btn btn-success btn-lg rounded-pill px-4 shadow-sm btn-hover-effect mb-2">
								<i class="fas fa-check-circle mr-2"></i> Đăng ký
							</button>
						</form>
					</div>
				</div>
			}
		</div>
	</div>

	<div class="text-center mt-4 mb-5">
		<a asp-controller="Phongtrocuatoi" asp-action="Index" class="btn btn-warning btn-lg rounded-pill px-4 shadow-sm btn-hover-effect">
			<i class="fas fa-arrow-left mr-2"></i> Quay lại
		</a>
	</div>
</div>
@section Scripts {
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const forms = document.querySelectorAll('form');

			forms.forEach(form => {
				const inputNgayBatDau = form.querySelector('.ngay-bat-dau');

				inputNgayBatDau.addEventListener('change', function () {
					const ngayBatDau = new Date(this.value);
					if (!isNaN(ngayBatDau)) {
						const ngayKetThuc = new Date(ngayBatDau);
						ngayKetThuc.setMonth(ngayKetThuc.getMonth() + 1);

						const yyyy = ngayKetThuc.getFullYear();
						const mm = String(ngayKetThuc.getMonth() + 1).padStart(2, '0');
						const dd = String(ngayKetThuc.getDate()).padStart(2, '0');
						const formattedDate = `${yyyy}-${mm}-${dd}`;

						const inputNgayKetThuc = form.querySelector('.ngay-ket-thuc');
						if(inputNgayKetThuc) inputNgayKetThuc.value = formattedDate;
					} else {
						const inputNgayKetThuc = form.querySelector('.ngay-ket-thuc');
						if(inputNgayKetThuc) inputNgayKetThuc.value = '';
					}
				});
			});
		});
	</script>
}

<style>
	/* Container rộng max 1630px */
	.container {
		max-width: 1630px !important;
	}

	/* Grid 3 cột trên màn hình rộng, tự co lại trên màn hình nhỏ */
	.service-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
		gap: 30px;
	}

	/* Bo tròn mạnh hơn */
	.service-card {
		border-radius: 1.5rem !important;
		overflow: hidden;
		transition: all 0.3s ease;
	}

		.service-card:hover {
			box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
			transform: translateY(-4px);
		}

	.btn-hover-effect {
		transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
		border-radius: 50rem !important;
	}

		.btn-hover-effect:hover {
			background-color: #449d44 !important;
			transform: scale(1.05);
			box-shadow: 0 8px 16px rgba(68, 157, 68, 0.5);
		}

		.btn-hover-effect:active {
			transform: scale(0.95);
			box-shadow: 0 4px 8px rgba(68, 157, 68, 0.4);
		}

	.service-form label {
		font-weight: 600;
		color: #555;
	}

	.form-control {
		min-width: 130px;
	}

	@@media (max-width: 767px) {
		.form-inline {
			flex-direction: column !important;
			align-items: flex-start !important;
		}

			.form-inline .form-group {
				margin-right: 0 !important;
				margin-bottom: 0.75rem;
				width: 100%;
			}

			.form-inline button {
				width: 100%;
			}
	}
</style>
